# service identity
org.opencadc.cavern.resourceID = {{ .Values.deployment.cavern.resourceID }}

# base directory for cavern files
org.opencadc.cavern.filesystem.baseDir = {{ .Values.deployment.cavern.filesystem.dataDir }}

org.opencadc.cavern.filesystem.subPath = {{ .Values.deployment.cavern.filesystem.subPath }}

{{- with .Values.deployment.cavern.filesystem.rootOwner }}
# owner of root node has admin power
org.opencadc.cavern.filesystem.rootOwner = {{ .adminUsername }}

# (optional) username, uid, and gid (default) of the root owner
{{- if .username }}
org.opencadc.cavern.filesystem.rootOwner.username = {{ .username }}
{{- else }}
{{- required "value for .Values.deployment.cavern.filesystem.rootOwner.username is required." "" }}
{{- end }}

{{- if .uid }}
org.opencadc.cavern.filesystem.rootOwner.uid = {{ .uid }}
{{- else }}
{{- required "value for .Values.deployment.cavern.filesystem.rootOwner.uid is required." "" }}
{{- end }}

{{- if .gid }}
org.opencadc.cavern.filesystem.rootOwner.gid = {{ .gid }}
{{- else }}
{{- required "value for .Values.deployment.cavern.filesystem.rootOwner.gid is required." "" }}
{{- end }}

{{- end }}

# (optional) keys to generate pre-auth URLs to cavern
{{- with .Values.deployment.cavern.keys }}
{{- if .subDir }}
org.opencadc.cavern.privateKey = {{ .subDir }}/{{ .private }}
org.opencadc.cavern.publicKey = {{ .subDir }}/{{ .public }}
{{- else }}
org.opencadc.cavern.privateKey = {{ .private }}
org.opencadc.cavern.publicKey = {{ .public }}
{{- end }}
{{- end }}

{{- with .Values.deployment.cavern.sshfs }}
# (optional) base directory exposed for sshfs mounts
# {server}[:{port}]:{path}
org.opencadc.cavern.sshfs.serverBase = {{ .serverBase }}
{{- end }}
